<script>
document.getElementById("assignmentForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    const params = new URLSearchParams(data);

    // Use your own domain proxy (hosted alongside this page)
    const proxy = "https://alexchase32.github.io/proxy.php";
    const target = "https://script.google.com/macros/s/AKfycbwyQfsleKAuDCfrVRa8lBqCXAsP00AeKY9jSzt_EHC6eTxsVSodmhxbS-k_H_6BFeQrzA/exec";
    const url = `${proxy}?url=${encodeURIComponent(target)}`;

    try {
        const response = await fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: params.toString()
        });

        const msgContainer = document.getElementById("message-container");
        form.reset();
        msgContainer.innerHTML = '<div class="message">âœ… Assignment submitted successfully! Thank you.</div>';

        setTimeout(() => {
            window.location.href = window.location.pathname;
        }, 3000);
    } catch (error) {
        alert("There was an error submitting your assignment. Please try again.");
        console.error(error);
    }
});
</script>
